---
- hosts: all
  gather_facts: false
  
  tasks:
    - name: Load domains from git repository
      slurp:
        src: "{{ playbook_dir }}/domains.csv"
      register: domains_content
      run_once: true

    - name: Load brands from git repository
      slurp:
        src: "{{ playbook_dir }}/brands.csv"
      register: brands_content
      run_once: true

    - name: Load ref_links from git repository
      slurp:
        src: "{{ playbook_dir }}/ref_links.conf"
      register: ref_links_content
      run_once: true

    - name: Parse domains
      set_fact:
        domains: "{{ domains_content.content | b64decode | split('\n') | reject('equalto', '') | list }}"
      run_once: true

    - name: Parse brands
      set_fact:
        brands: "{{ brands_content.content | b64decode | split('\n') | reject('equalto', '') | list }}"
      run_once: true

    - name: Parse ref_links
      set_fact:
        ref_links: "{{ ref_links_content.content | b64decode | trim }}"
      run_once: true

    - name: Display loaded domains
      debug:
        msg: "‚úÖ Domains: {{ domains | join(', ') }}"
      run_once: true

    - name: Display loaded brands
      debug:
        msg: "‚úÖ Brands: {{ brands | join(', ') }}"
      run_once: true

    - name: Display loaded ref_links
      debug:
        msg: "‚úÖ Ref Links loaded"
      run_once: true

    - name: Create site directories
      file:
        path: "/var/www/{{ item[0] }}/{{ item[1] }}"
        state: directory
        owner: www-data
        group: www-data
        mode: '0755'
      loop: "{{ domains | product(brands) | list }}"

    - name: Generate index.html
      copy:
        content: |
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <meta name="robots" content="index, follow">
              <meta name="description" content="{{ item[1] | upper }} casino - –∏–≥—Ä–∞–π –æ–Ω–ª–∞–π–Ω, –±–æ–Ω—É—Å—ã 50000 —Ä—É–±, –≤—ã–≤–æ–¥ 24 —á–∞—Å–∞">
              <meta name="keywords" content="casino online, {{ item[1] | upper }} casino, –±–æ–Ω—É—Å—ã, —Å–ª–æ—Ç—ã">
              <link rel="canonical" href="https://{{ item[0] }}/{{ item[1] | lower }}/">
              <title>{{ item[1] | upper }} Casino - 50000 —Ä—É–± –±–æ–Ω—É—Å</title>
              <style>
                  * { margin: 0; padding: 0; box-sizing: border-box; }
                  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; }
                  .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
                  h1 { font-size: 2.5em; margin: 30px 0; color: #1a1a1a; }
                  h2 { font-size: 1.8em; margin: 30px 0 15px 0; color: #2c3e50; border-bottom: 3px solid #FF6B35; }
                  p { margin: 15px 0; font-size: 1.1em; line-height: 1.8; }
                  .cta-button { display: inline-block; background: #FF6B35; color: white; padding: 15px 30px; border-radius: 5px; text-decoration: none; font-weight: bold; }
                  table { width: 100%; border-collapse: collapse; margin: 20px 0; background: white; }
                  th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
                  th { background: #FF6B35; color: white; }
                  .ref-links { text-align: center; margin: 30px 0; padding: 20px; background: #f0f0f0; }
              </style>
          </head>
          <body>
              <div class="container">
                  <h1>üé∞ {{ item[1] | upper }} Casino</h1>
                  
                  <p><strong>{{ item[1] | upper }} casino</strong> ‚Äî –ø—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –ª–∏—Ü–µ–Ω–∑–∏–µ–π Curacao. –ù–∞ —Å–∞–π—Ç–µ 7200+ —Å–ª–æ—Ç–æ–≤. <strong>–ö–∞–∑–∏–Ω–æ {{ item[1] | upper }}</strong> –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥ –∑–∞ 15-30 –º–∏–Ω—É—Ç.</p>
                  
                  <p><strong>{{ item[1] | title }} casino</strong> –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç 100% –±–æ–Ω—É—Å –¥–æ 50,000 —Ä—É–±–ª–µ–π + 100 —Ñ—Ä–∏—Å–ø–∏–Ω–æ–≤. –í—Å–µ –∏–≥—Ä—ã —á–µ—Å—Ç–Ω—ã–µ. –†–µ–π—Ç–∏–Ω–≥ 4.8‚òÖ –æ—Ç 5000+ –∏–≥—Ä–æ–∫–æ–≤.</p>
                  
                  <a href="./register/" class="cta-button">‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                  
                  <h2>–ü–æ—á–µ–º—É {{ item[1] | upper }} Casino?</h2>
                  <p><strong>{{ item[1] | upper }} –∫–∞–∑–∏–Ω–æ</strong> –∑–∞–≤–æ–µ–≤–∞–ª–æ –¥–æ–≤–µ—Ä–∏–µ —á–µ—Å—Ç–Ω–æ–π –∏–≥—Ä–æ–π. –ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π RNG. –õ–∏—Ü–µ–Ω–∑–∏—è Curacao –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ª–µ–≥–∞–ª—å–Ω–æ—Å—Ç—å.</p>
                  
                  <table>
                      <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
                      <tr><td>–õ–∏—Ü–µ–Ω–∑–∏—è</td><td>Curacao eGaming ‚úÖ</td></tr>
                      <tr><td>–°–ª–æ—Ç–æ–≤</td><td>7200+</td></tr>
                      <tr><td>–ú–∏–Ω–∏–º—É–º</td><td>100 —Ä—É–±–ª–µ–π</td></tr>
                      <tr><td>–í—ã–≤–æ–¥</td><td>15-30 –º–∏–Ω—É—Ç</td></tr>
                      <tr><td>–ë–æ–Ω—É—Å</td><td>100% –¥–æ 50,000 —Ä—É–±</td></tr>
                  </table>
                  
                  <h2>–°–ø–æ—Å–æ–±—ã –ø–ª–∞—Ç–µ–∂–∞</h2>
                  <table>
                      <tr><th>–ú–µ—Ç–æ–¥</th><th>–ú–∏–Ω–∏–º—É–º</th><th>–°–∫–æ—Ä–æ—Å—Ç—å</th></tr>
                      <tr><td>–°–ë–ü</td><td>1,500 —Ä—É–±</td><td>–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ</td></tr>
                      <tr><td>Joker</td><td>150 —Ä—É–±</td><td>5-10 –º–∏–Ω</td></tr>
                      <tr><td>–ö–∞—Ä—Ç–∞</td><td>100 —Ä—É–±</td><td>15-30 –º–∏–Ω</td></tr>
                  </table>
                  
                  <div class="ref-links">
                      {{ ref_links | safe }}
                  </div>
                  
                  <div style="text-align: center; margin-top: 40px;">
                      <a href="./" style="margin: 0 15px; color: #FF6B35; text-decoration: none; font-weight: bold;">–ì–ª–∞–≤–Ω–∞—è</a>
                      <a href="./register/" style="margin: 0 15px; color: #FF6B35; text-decoration: none; font-weight: bold;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                      <a href="./reviews/" style="margin: 0 15px; color: #FF6B35; text-decoration: none; font-weight: bold;">–û—Ç–∑—ã–≤—ã</a>
                      <a href="./bonus/" style="margin: 0 15px; color: #FF6B35; text-decoration: none; font-weight: bold;">–ë–æ–Ω—É—Å—ã</a>
                      <a href="./withdrawal/" style="margin: 0 15px; color: #FF6B35; text-decoration: none; font-weight: bold;">–í—ã–≤–æ–¥</a>
                  </div>
              </div>
          </body>
          </html>
        dest: "/var/www/{{ item[0] }}/{{ item[1] }}/index.html"
        owner: www-data
        group: www-data
        mode: '0644'
      loop: "{{ domains | product(brands) | list }}"

    - name: Generate register.html
      copy:
        content: |
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <link rel="canonical" href="https://{{ item[0] }}/{{ item[1] | lower }}/register/">
              <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ {{ item[1] | upper }} Casino</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; margin: 0; padding: 20px;">
              <div style="max-width: 1200px; margin: 0 auto;">
                  <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ {{ item[1] | upper }} Casino</h1>
                  <p>90 —Å–µ–∫—É–Ω–¥, 50,000 —Ä—É–±–ª–µ–π –±–æ–Ω—É—Å–∞!</p>
                  <ol><li>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç</li><li>Email –∏ –ø–∞—Ä–æ–ª—å</li><li>–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li><li>–î–µ–ø–æ–∑–∏—Ç</li><li>–ë–æ–Ω—É—Å!</li></ol>
                  <div style="text-align: center; margin-top: 30px;">
                      <a href="./" style="margin-right: 20px; color: #FF6B35; font-weight: bold; text-decoration: none;">‚Üê –ì–ª–∞–≤–Ω–∞—è</a>
                      <a href="./reviews/" style="color: #FF6B35; font-weight: bold; text-decoration: none;">–û—Ç–∑—ã–≤—ã ‚Üí</a>
                  </div>
              </div>
          </body>
          </html>
        dest: "/var/www/{{ item[0] }}/{{ item[1] }}/register/index.html"
        owner: www-data
        group: www-data
        mode: '0644'
      loop: "{{ domains | product(brands) | list }}"

    - name: Generate reviews.html
      copy:
        content: |
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <link rel="canonical" href="https://{{ item[0] }}/{{ item[1] | lower }}/reviews/">
              <title>–û—Ç–∑—ã–≤—ã –æ {{ item[1] | upper }} Casino</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; margin: 0; padding: 20px;">
              <div style="max-width: 1200px; margin: 0 auto;">
                  <h1>–û—Ç–∑—ã–≤—ã –æ {{ item[1] | upper }} Casino - 4.8‚òÖ</h1>
                  <div style="background: white; padding: 20px; margin: 15px 0;">
                      <strong>–ò–≤–∞–Ω –ö.:</strong> –í—ã–∏–≥—Ä–∞–ª 250,000 —Ä—É–±–ª–µ–π! ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
                  </div>
                  <div style="text-align: center; margin-top: 30px;">
                      <a href="./bonus/" style="margin-right: 20px; color: #FF6B35; font-weight: bold; text-decoration: none;">‚Üê –ë–æ–Ω—É—Å—ã</a>
                      <a href="./withdrawal/" style="color: #FF6B35; font-weight: bold; text-decoration: none;">–í—ã–≤–æ–¥ ‚Üí</a>
                  </div>
              </div>
          </body>
          </html>
        dest: "/var/www/{{ item[0] }}/{{ item[1] }}/reviews/index.html"
        owner: www-data
        group: www-data
        mode: '0644'
      loop: "{{ domains | product(brands) | list }}"

    - name: Generate bonus.html
      copy:
        content: |
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <link rel="canonical" href="https://{{ item[0] }}/{{ item[1] | lower }}/bonus/">
              <title>–ë–æ–Ω—É—Å—ã –≤ {{ item[1] | upper }} Casino</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; margin: 0; padding: 20px;">
              <div style="max-width: 1200px; margin: 0 auto;">
                  <h1>–ë–æ–Ω—É—Å—ã –≤ {{ item[1] | upper }} Casino</h1>
                  <p>100% –¥–æ 50,000 —Ä—É–±–ª–µ–π + 100 —Ñ—Ä–∏—Å–ø–∏–Ω–æ–≤!</p>
                  <div style="text-align: center; margin-top: 30px;">
                      <a href="./reviews/" style="margin-right: 20px; color: #FF6B35; font-weight: bold; text-decoration: none;">‚Üê –û—Ç–∑—ã–≤—ã</a>
                      <a href="./withdrawal/" style="color: #FF6B35; font-weight: bold; text-decoration: none;">–í—ã–≤–æ–¥ ‚Üí</a>
                  </div>
              </div>
          </body>
          </html>
        dest: "/var/www/{{ item[0] }}/{{ item[1] }}/bonus/index.html"
        owner: www-data
        group: www-data
        mode: '0644'
      loop: "{{ domains | product(brands) | list }}"

    - name: Generate withdrawal.html
      copy:
        content: |
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <link rel="canonical" href="https://{{ item[0] }}/{{ item[1] | lower }}/withdrawal/">
              <title>–í—ã–≤–æ–¥ –¥–µ–Ω–µ–≥ –∏–∑ {{ item[1] | upper }} Casino</title>
          </head>
          <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; margin: 0; padding: 20px;">
              <div style="max-width: 1200px; margin: 0 auto;">
                  <h1>–í—ã–≤–æ–¥ –¥–µ–Ω–µ–≥ –∏–∑ {{ item[1] | upper }} Casino</h1>
                  <p>15-30 –º–∏–Ω—É—Ç! –°–ë–ü, Joker, –∫–∞—Ä—Ç—ã, –∫—Ä–∏–ø—Ç–æ - 0% –∫–æ–º–∏—Å—Å–∏—è!</p>
                  <div style="text-align: center; margin-top: 30px;">
                      <a href="./bonus/" style="margin-right: 20px; color: #FF6B35; font-weight: bold; text-decoration: none;">‚Üê –ë–æ–Ω—É—Å—ã</a>
                      <a href="./" style="color: #FF6B35; font-weight: bold; text-decoration: none;">–ù–∞ –≥–ª–∞–≤–Ω—É—é ‚Üí</a>
                  </div>
              </div>
          </body>
          </html>
        dest: "/var/www/{{ item[0] }}/{{ item[1] }}/withdrawal/index.html"
        owner: www-data
        group: www-data
        mode: '0644'
      loop: "{{ domains | product(brands) | list }}"
